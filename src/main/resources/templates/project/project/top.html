<!DOCTYPE html>
<html lang="ja">
<head>
	<meta content="ja" http-equiv="Content-Language" />
	<meta content="text/html; charset=utf-8" http-equiv="Content-Type" />
	<title>sample page</title>
</head>
<body>
	<div>プロジェクトの画面です</div>
	
	<br /><hr /><br />
	<div>環境登録</div>
	<form action="#" th:action="@{/project/environment/regist}" th:object="${environmentForm}" method="post">
		<input type="hidden" th:field="*{projectName}" />
		<table border="1" rules="all">
			<tr>
				<td>environment</td>
			</tr>
			<tr>
				<td><input type="text" th:field="*{environmentName}" /></td>
			</tr>
		</table>
		<input type="submit" value="Submit" />
	</form>
	
	<div>環境一覧</div>
	<table border="1" rules="all">
		<tr>
			<td>environment</td>
			<td>Delete</td>
		</tr>
		<tr th:each="environment : ${environmentList}">
			<td>
				<a th:href="@{/environment/view(projectName=${environment.projectName}, environmentName=${environment.environmentName})}"
				th:text="${environment.environmentName}" />
			</td>
			<form method="POST" th:action="@{/project/environment/delete}" th:object="${environmentKey}">
				<input type="hidden" th:field="*{projectName}" />
				<input type="hidden" name="environmentName" th:value="${environment.environmentName}" />
				<td><input type="submit" value="Delete" /></td>
			</form>
		</tr>
	</table>
	
	<br /><hr /><br />
	<div>サーバ登録</div>
	<form action="#" th:action="@{/project/server/regist}" th:object="${serverForm}" method="post">
		<input type="hidden" th:field="*{projectName}" />
		<table border="1" rules="all">
			<tr>
				<td>environment</td>
				<td>server</td>
			</tr>
			<tr>
				<td>
					<select size="1" th:field="*{environmentName}">
						<option th:each="environment : ${environmentList}" th:value="${environment.environmentName}" th:label="${environment.environmentName}" />
					</select>
				</td>
				<td><input type="text" th:field="*{serverName}" /></td>
			</tr>
		</table>
		<input type="submit" value="Submit" />
	</form>
	
	<div>サーバ一覧</div>
	<table border="1" rules="all">
		<tr>
			<td>environment</td>
			<td>server</td>
			<td>Delete</td>
		</tr>
		<tr th:each="server : ${serverList}">
			<td>
				<div th:text="${server.environmentName}"/>
			</td>
			<td>
				<a th:href="@{/server/view(projectName=${server.projectName}, serverName=${server.serverName})}"
				th:text="${server.serverName}" />
			</td>
			<form method="POST" th:action="@{/project/server/delete}" th:object="${serverKey}">
				<input type="hidden" th:field="*{projectName}" />
				<input type="hidden" name="serverName" th:value="${server.serverName}" />
				<td><input type="submit" value="Delete" /></td>
			</form>
		</tr>
	</table>
	
	<br /><hr /><br />
	<div>ロール登録</div>
	<form action="#" th:action="@{/project/role/regist}" th:object="${roleForm}" method="post">
		<input type="hidden" th:field="*{projectName}" />
		<table border="1" rules="all">
			<tr>
				<td>role</td>
			</tr>
			<tr>
				<td><input type="text" th:field="*{roleName}" /></td>
			</tr>
		</table>
		<input type="submit" value="Submit" />
	</form>
	
	<div>ロール一覧</div>
	<table border="1" rules="all">
		<tr>
			<td>role</td>
			<td>Delete</td>
		</tr>
		<tr th:each="role : ${roleList}">
			<td>
				<a th:href="@{/role/view(projectName=${role.projectName}, roleName=${role.roleName})}"
				th:text="${role.roleName}" />
			</td>
			<form method="POST" th:action="@{/project/role/delete}" th:object="${roleKey}">
				<input type="hidden" th:field="*{projectName}" />
				<input type="hidden" name="roleName" th:value="${role.roleName}" />
				<td><input type="submit" value="Delete" /></td>
			</form>
		</tr>
	</table>
	
	<br /><hr /><br />
	<div>グローバルロール登録</div>
	<form action="#" th:action="@{/project/globalRole/regist}" th:object="${globalRoleRelationForm}" method="post">
		<input type="hidden" th:field="*{projectName}" />
		<table border="1" rules="all">
			<tr>
				<td>role</td>
			</tr>
			<tr>
				<td>
					<select size="1" th:field="*{roleName}">
						<option th:each="globalRole : ${globalRoleList}" th:value="${globalRole.roleName}" th:label="${globalRole.roleName}" />
					</select>
				</td>
			</tr>
		</table>
		<input type="submit" value="Submit" />
	</form>
	
	<div>グローバルロール一覧</div>
	<table border="1" rules="all">
		<tr>
			<td>role</td>
			<td>tagName</td>
			<td>changeTagName</td>
			<td>Update</td>
		</tr>
		<tr th:each="globalRoleRelation : ${globalRoleRelationList}">
			<td>
				<div th:text="${globalRoleRelation.roleName}" />
			</td>
			<td>
				<div th:text="${globalRoleRelation.tagName}" />
			</td>
			<form method="POST" th:action="@{/project/globalRole/update}" th:object="${globalRoleRelationTagUpdateForm}">
				<input type="hidden" th:field="*{projectName}" />
				<input type="hidden" name="roleName" th:value="${globalRoleRelation.roleName}" />
				<td>
					<select size="1" th:field="*{tagName}">
						<option th:each="tag : ${globalRoleRelation.tagList}" th:value="${tag}" th:label="${tag}" />
					</select>
				</td>
				<td>
					<input type="submit" value="Update" />
				</td>
			</form>
		</tr>
	</table>
	
	<br /><hr /><br />
	<div>Git</div>
	レポジトリ：<span th:text="${project.repositoryUrl}" />
	<div>コミット</div>
	<form action="#" th:action="@{/project/git/commit}" th:object="${gitForm}" method="post">
		<input type="hidden" th:field="*{projectName}" />
		<table border="1" rules="all">
			<tr>
				<td>userName</td>
				<td>password</td>
				<td>comment</td>
			</tr>
			<tr>
				<td><input type="text" th:field="*{userName}" /></td>
				<td><input type="password" th:field="*{password}" /></td>
				<td><input type="text" th:field="*{comment}" /></td>
			</tr>
		</table>
		<input type="submit" value="Commit" />
	</form>
	
	<br /><hr /><br />
	<div>Jenkins</div>
	
	<div>Jenkins登録</div>
	<form action="#" th:action="@{/project/jenkins/regist}" th:object="${jenkinsInfoForm}" method="post">
		<input type="hidden" th:field="*{projectName}" />
		<table border="1" rules="all">
			<tr>
				<td>IpAddress</td>
				<td>Port</td>
				<td>JobName</td>
			</tr>
			<tr>
				<td><input type="text" th:field="*{jenkinsIpAddress}" /></td>
				<td><input type="text" th:field="*{jenkinsPort}" /></td>
				<td><input type="text" th:field="*{jenkinsJobName}" /></td>
			</tr>
		</table>
		<input type="submit" value="Submit" />
	</form>
	
	<div>タスク適用（グループ別適用）</div>
	<table border="1" rules="all">
		<tr>
			<td>environment</td>
			<td>group</td>
			<td>Build</td>
		</tr>
		<tr th:each="group : ${groupList}">
			<td><div th:text="${group.environmentName}" /></td>
			<td><div th:text="${group.groupName}" /></td>
			<td>
				<a th:href="@{/apply/view(projectName=${project.projectName}, environmentName=${group.environmentName}, groupName=${group.groupName})}"
				th:text="Build" />
			</td>
		</tr>
	</table>
	<div>タスク適用（サーバ別適用）</div>
	<table border="1" rules="all">
		<tr>
			<td>environment</td>
			<td>group</td>
			<td>server</td>
			<td>Build</td>
		</tr>	
		<tr th:each="server : ${serverbuildList}">
			<td><div th:text="${server.environmentName}" /></td>
			<td><div th:text="${server.groupName}" /></td>
			<td><div th:text="${server.serverName}" /></td>
			<td>
				<a th:href="@{/applyServer/view(projectName=${server.projectName}, environmentName=${server.environmentName}, groupName=${server.groupName}, serverName=${server.serverName})}"
				th:text="Build" />
			</td>
		</tr>
	</table>
	
	<div>履歴</div>
	<table border="1" rules="all">
		<tr>
			<td>environment</td>
			<td>group</td>
			<td>server</td>
			<td>tagName</td>
			<td>tagComment</td>
			<td>applyTime</td>
			<td>Rebuild</td>
		</tr>
		<tr th:each="applyHistory : ${applyHistoryList}">
			<td><div th:text="${applyHistory.environmentName}" /></td>
			<td><div th:text="${applyHistory.groupName}" /></td>
			<td><div th:text="${applyHistory.serverName}" /></td>
			<td><div th:text="${applyHistory.tagName}" /></td>
			<td><div th:text="${applyHistory.tagComment}" /></td>
			<td><div th:text="${#dates.format(applyHistory.applyTime, 'yyyy/MM/dd HH:mm:ss')}" /></td>
			<form method="POST" th:action="@{/project/jenkins/rebuild}" th:object="${rebuildForm}">
				<input type="hidden" th:field="*{projectName}" />
				<input type="hidden" name="applyHistroyId" th:value="${applyHistory.applyHistroyId}" />
				<td><input type="submit" value="Rebuild" /></td>
			</form>
		</tr>
	</table>
	
	<br /><hr /><br />
	<div>テストデータダウンロード</div>
	<table border="1" rules="all">
		<tr>
			<td>environment</td>
			<td>group</td>
			<td>server</td>
			<td>Download</td>
		</tr>	
		<tr th:each="server : ${serverbuildList}">
			<td><div th:text="${server.environmentName}" /></td>
			<td><div th:text="${server.groupName}" /></td>
			<td><div th:text="${server.serverName}" /></td>
			<form method="POST" enctype="multipart/form-data" th:action="@{/project/testZip}" th:object="${serverRelationKey}">
				<input type="hidden" th:field="*{projectName}" />
				<input type="hidden" name="environmentName" th:value="${server.environmentName}" />
				<input type="hidden" name="groupName" th:value="${server.groupName}" />
				<input type="hidden" name="serverName" th:value="${server.serverName}" />
				<td><input type="submit" value="Download" /></td>
			</form>
		</tr>
	</table>
	
	<br /><hr />
	<a th:href="@{/}" >トップ</a>
</body>
</html>